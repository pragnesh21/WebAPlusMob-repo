import{a as Q}from"./chunk-EBS32CBZ.js";import{t as B}from"./chunk-CXFZ3G62.js";import{a as j}from"./chunk-3RXKQBQ6.js";import"./chunk-XOFWPMIU.js";import{c as A,e as f,g as V,h as U,l as H,n as O,o as W,p as z,q as J,s as K}from"./chunk-RINC4VG4.js";import{Aa as x,O as I,W as L,ba as k,c as y,ca as T,ea as E,i as F,qa as G,ta as N,va as D,w as _,wa as P,xa as q,ya as M,za as R}from"./chunk-APEOJHZD.js";import{Cc as s,Pb as u,Qb as p,Qc as w,Vb as c,Wb as r,Xb as o,Yb as l,cb as n,ib as m,kc as C,nc as b,ob as h,pa as g,qa as v}from"./chunk-L6VKQ3O5.js";import"./chunk-MTBLVN3Q.js";var X=i=>({"is-invalid":i});function Z(i,a){i&1&&(r(0,"c-form-feedback"),s(1,`
Username is required. `),o())}function $(i,a){i&1&&(r(0,"c-form-feedback"),s(1," Password is required "),o())}function ee(i,a){i&1&&(r(0,"c-form-feedback"),s(1," Password must be at least 2 characters "),o())}function oe(i,a){if(i&1&&(u(0,$,2,0,"c-form-feedback"),u(1,ee,2,0,"c-form-feedback")),i&2){let t=b();p(t.f.password.errors!=null&&t.f.password.errors.required?0:-1),n(),p(t.f.password.errors!=null&&t.f.password.errors.minlength?1:-1)}}var d=class d{constructor(a,t,e,S,re){this.fb=a;this.router=t;this.toaster=e;this.authService=S;this.msgSend=re;this.showPassword=!1}togglePassword(){this.showPassword=!this.showPassword}ngOnInit(){localStorage.removeItem("token"),localStorage.removeItem("userName"),localStorage.removeItem("email"),localStorage.removeItem("roles"),this.loginForm=this.fb.group({username:["",[f.required]],password:["",[f.required,f.minLength(2)]]})}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched(),this.msgSend.add({severity:"warn",summary:"Warn",detail:"Please enter username and password"});return}let a=this.loginForm.value;debugger;this.authService.login(a).subscribe({next:t=>{this.msgSend.add({severity:"success",summary:"Success",detail:"Login successful!"}),this.router.navigate(["/dashboard"])},error:t=>{this.msgSend.add({severity:"error",summary:"Error",detail:"Invalid credentials!"})}})}get f(){return this.loginForm.controls}};d.\u0275fac=function(t){return new(t||d)(m(J),m(_),m(Q),m(j),m(B))},d.\u0275cmp=h({type:d,selectors:[["app-login"]],decls:34,vars:12,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],["breakpoint","md"],[1,"justify-content-center"],["lg","6","xl","6"],[1,"p-4"],["cForm","",3,"ngSubmit","formGroup"],[1,"text-center","mb-3"],["src","./../../../../assets/logo/batmanLogo.png","alt","logo",1,"img-fluid",2,"max-height","60px"],[1,"text-body-secondary"],[1,"mb-3"],["cInputGroupText",""],["cIcon","","name","cilUser"],["required","","formControlName","username","autoComplete","username","cFormControl","","placeholder","Username",3,"ngClass"],[1,"mb-4"],["cIcon","","name","cilLockLocked"],["formControlName","password","autoComplete","current-password","cFormControl","","placeholder","Password",3,"type","ngClass"],["cInputGroupText","",2,"cursor","pointer",3,"click"],[1,"pi",3,"ngClass"],["xs","6"],["cButton","","type","submit","color","primary",1,"px-4"],["xs","6",1,"text-end"],["cButton","","color","link",1,"px-0"],["cButton","","color","primary","href","#/register",1,"mt-3",3,"active"]],template:function(t,e){t&1&&(r(0,"div",0)(1,"c-container",1)(2,"c-row",2)(3,"c-col",3)(4,"c-card-group")(5,"c-card",4)(6,"c-card-body")(7,"form",5),C("ngSubmit",function(){return e.onSubmit()}),r(8,"div",6),l(9,"img",7),o(),r(10,"p",8),s(11,"Sign In to your account"),o(),r(12,"c-input-group",9)(13,"span",10),g(),l(14,"svg",11),o(),v(),l(15,"input",12),u(16,Z,2,0,"c-form-feedback"),o(),r(17,"c-input-group",13)(18,"span",10),g(),l(19,"svg",14),o(),v(),l(20,"input",15),r(21,"span",16),C("click",function(){return e.togglePassword()}),l(22,"i",17),o(),u(23,oe,2,2),o(),r(24,"c-row")(25,"c-col",18)(26,"button",19),s(27," Login "),o()(),r(28,"c-col",20)(29,"button",21),s(30," Forgot password? "),o()()(),r(31,"c-row")(32,"a",22),s(33," Register Now! "),o()()()()()()()()()()),t&2&&(n(7),c("formGroup",e.loginForm),n(8),c("ngClass",w(8,X,(e.f.username==null?null:e.f.username.invalid)&&((e.f.username==null?null:e.f.username.touched)||(e.f.username==null?null:e.f.username.dirty)))),n(),p(e.f.username!=null&&e.f.username.invalid&&(e.f.username!=null&&e.f.username.touched)?16:-1),n(4),c("type",e.showPassword?"text":"password")("ngClass",w(10,X,(e.f.password==null?null:e.f.password.invalid)&&((e.f.password==null?null:e.f.password.touched)||(e.f.password==null?null:e.f.password.dirty)))),n(2),c("ngClass",e.showPassword?"pi-eye-slash":"pi-eye"),n(),p(e.f.password!=null&&e.f.password.invalid&&(e.f.password!=null&&e.f.password.touched)?23:-1),n(9),c("active",!0))},dependencies:[M,x,R,E,k,T,G,P,q,I,N,L,D,K,H,A,V,U,z,O,W,F,y],encapsulation:2});var Y=d;export{Y as LoginComponent};
