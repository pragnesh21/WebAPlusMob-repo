import{a as m}from"./chunk-XOFWPMIU.js";import{n as l,w as s}from"./chunk-APEOJHZD.js";import{Z as n,ca as a,ga as i}from"./chunk-L6VKQ3O5.js";var t=class t{constructor(o,e){this.http=o;this.router=e;this.apiUrl=`${m.apiBaseUrl}/Account`}login(o){debugger;return this.http.post(`${this.apiUrl}/SignIn`,o).pipe(n(e=>{let r=new Date;r.setSeconds(r.getSeconds()+720),localStorage.setItem("expiresAt",r.toISOString()),localStorage.setItem("token",e.token),localStorage.setItem("userName",e.userName),localStorage.setItem("email",e.email),localStorage.setItem("roles",JSON.stringify(e.roles))}))}logout(){localStorage.removeItem("token"),localStorage.removeItem("userName"),localStorage.removeItem("email"),localStorage.removeItem("roles"),this.router.navigate(["/login"])}getToken(){return localStorage.getItem("token")}isLoggedIn(){return!!this.getToken()}};t.\u0275fac=function(e){return new(e||t)(i(l),i(s))},t.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"});var p=t;export{p as a};
